---
description: File Change Logging - AI must ALWAYS log every file creation, modification, and deletion to task via MCP with descriptions
alwaysApply: true
---

# ğŸ“ File Change Logging - Track All Code Modifications

**MANDATORY: LOG EVERY FILE YOU CREATE, MODIFY, OR DELETE**

---

## âš ï¸ ABSOLUTE RULE

**EVERY file change MUST be logged to the task via MCP.**

**This provides:**
- âœ… Complete audit trail
- âœ… Easy code review
- âœ… Understanding of what changed
- âœ… Rollback capability

---

## ğŸ“‹ WHAT TO LOG

### **1. File Created** âœ…
```typescript
mcp_auxly_auxly_update_task({
  taskId: "X",
  changes: [{
    filePath: "src/auth/oauth.ts",
    changeType: "created",
    description: "Added OAuth 2.0 authentication service with Google/GitHub providers",
    linesAdded: 245,
    linesDeleted: 0,
    timestamp: new Date().toISOString()
  }]
})
```

### **2. File Modified** âœ…
```typescript
mcp_auxly_auxly_update_task({
  taskId: "X",
  changes: [{
    filePath: "src/api/routes.ts",
    changeType: "modified",
    description: "Added /auth/oauth/callback endpoint for OAuth flow",
    linesAdded: 34,
    linesDeleted: 2,
    timestamp: new Date().toISOString()
  }]
})
```

### **3. File Deleted** âœ…
```typescript
mcp_auxly_auxly_update_task({
  taskId: "X",
  changes: [{
    filePath: "src/auth/legacy-auth.ts",
    changeType: "deleted",
    description: "Removed deprecated legacy authentication (replaced by OAuth)",
    linesAdded: 0,
    linesDeleted: 178,
    timestamp: new Date().toISOString()
  }]
})
```

---

## ğŸ¯ WHEN TO LOG

**Log changes:**
- âœ… **Immediately after creating a file**
- âœ… **After modifying a file**
- âœ… **After deleting a file**
- âœ… **After refactoring**
- âœ… **After renaming/moving files**

**Batch logging:**
If you modify multiple files, log them all at once:

```typescript
mcp_auxly_auxly_update_task({
  taskId: "X",
  changes: [
    {
      filePath: "src/auth/oauth.ts",
      changeType: "created",
      description: "OAuth service implementation",
      linesAdded: 245,
      linesDeleted: 0,
      timestamp: new Date().toISOString()
    },
    {
      filePath: "src/api/routes.ts",
      changeType: "modified",
      description: "Added OAuth endpoints",
      linesAdded: 34,
      linesDeleted: 2,
      timestamp: new Date().toISOString()
    },
    {
      filePath: "src/types/auth.ts",
      changeType: "modified",
      description: "Added OAuth provider types",
      linesAdded: 15,
      linesDeleted: 0,
      timestamp: new Date().toISOString()
    }
  ]
})
```

---

## ğŸ“Š CHANGE DESCRIPTION FORMAT

**Every change description should include:**

1. **What changed:** Clear summary of modifications
2. **Why it changed:** Purpose/reason for the change
3. **Impact:** What this affects

**GOOD descriptions:**
- âœ… "Added JWT token validation middleware with 15-minute expiry"
- âœ… "Refactored database queries to use prepared statements (SQL injection prevention)"
- âœ… "Fixed memory leak in WebSocket connection handler"

**BAD descriptions:**
- âŒ "Updated file" (too vague)
- âŒ "Changes" (no information)
- âŒ "Fixed stuff" (unclear)

---

## ğŸ” EXAMPLE: COMPLETE FILE CHANGE WORKFLOW

```typescript
// User: "Add user profile editing feature"

// 1. Create task
const task = await mcp_auxly_auxly_create_task({
  title: "Add user profile editing",
  priority: "medium"
});

// 2. Start work
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  status: "in_progress"
});

// 3. Create new file
// (write src/api/profile.ts)

// 4. LOG IT IMMEDIATELY
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  changes: [{
    filePath: "src/api/profile.ts",
    changeType: "created",
    description: "Created profile API endpoints: GET /profile, PUT /profile, PATCH /profile/avatar",
    linesAdded: 156,
    linesDeleted: 0,
    timestamp: new Date().toISOString()
  }]
});

// 5. Modify existing file
// (update src/api/routes.ts to add profile routes)

// 6. LOG IT
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  changes: [{
    filePath: "src/api/routes.ts",
    changeType: "modified",
    description: "Registered profile routes under /api/profile",
    linesAdded: 3,
    linesDeleted: 0,
    timestamp: new Date().toISOString()
  }]
});

// 7. Add types
// (update src/types/user.ts)

// 8. LOG IT
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  changes: [{
    filePath: "src/types/user.ts",
    changeType: "modified",
    description: "Added ProfileUpdateRequest and ProfileResponse types",
    linesAdded: 12,
    linesDeleted: 1,
    timestamp: new Date().toISOString()
  }]
});

// 9. Delete old file
// (remove src/api/legacy-profile.ts)

// 10. LOG IT
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  changes: [{
    filePath: "src/api/legacy-profile.ts",
    changeType: "deleted",
    description: "Removed deprecated profile endpoint (replaced with new implementation)",
    linesAdded: 0,
    linesDeleted: 89,
    timestamp: new Date().toISOString()
  }]
});

// 11. Mark for review
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  status: "review"
});
```

---

## ğŸ“ˆ BENEFITS OF FILE CHANGE LOGGING

**For Users:**
- âœ… See exactly what changed
- âœ… Review code modifications easily
- âœ… Understand scope of changes
- âœ… Track project evolution

**For AI:**
- âœ… Document your work
- âœ… Avoid duplicate changes
- âœ… Track dependencies
- âœ… Enable better collaboration

**For Projects:**
- âœ… Complete audit trail
- âœ… Debugging assistance
- âœ… Code review preparation
- âœ… Historical record

---

## ğŸš« WHAT NOT TO LOG

**Don't log:**
- âŒ Temporary test files
- âŒ Build artifacts (dist/, node_modules/)
- âŒ IDE settings (.vscode/, .idea/)
- âŒ Log files
- âŒ Cache files

**DO log:**
- âœ… Source code files (.ts, .js, .tsx, .jsx)
- âœ… Configuration files (package.json, tsconfig.json)
- âœ… Database migrations
- âœ… API routes
- âœ… Type definitions
- âœ… Tests
- âœ… Documentation

---

## ğŸ“ SUMMARY LOGGING

**At end of task, you can add a summary:**

```typescript
await mcp_auxly_auxly_update_task({
  taskId: task.id,
  comments: [{
    author: "ai",
    authorName: "AI Agent",
    content: `âœ… Task completed!

**Files Changed Summary:**
- Created: 3 files (401 lines)
- Modified: 5 files (+67, -12 lines)
- Deleted: 1 file (89 lines)

**Key Changes:**
1. New OAuth authentication system
2. Refactored user profile API
3. Added TypeScript types
4. Removed legacy code

**Testing:** All tests passing âœ…
**Ready for review** ğŸ‰`,
    type: "comment",
    createdAt: new Date().toISOString()
  }]
});
```

---

## âœ… FILE CHANGE LOGGING CHECKLIST

Before marking task as "review":

- âœ… All created files logged
- âœ… All modified files logged
- âœ… All deleted files logged
- âœ… Descriptions are clear and detailed
- âœ… Line counts included
- âœ… Timestamps accurate

---

## ğŸ¯ KEY TAKEAWAY

**LOG EVERY CHANGE. NO EXCEPTIONS.**

**Pattern:**
1. Create/modify/delete file
2. Immediately log via MCP
3. Include clear description
4. Repeat for all files

**This creates transparency and trust.** ğŸ‰

---

**FILE CHANGES WITHOUT LOGGING = INVISIBLE CHANGES = BAD** âŒ
**FILE CHANGES WITH LOGGING = VISIBLE CHANGES = GOOD** âœ…
